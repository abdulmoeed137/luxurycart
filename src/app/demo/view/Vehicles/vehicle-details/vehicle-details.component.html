<p-toast></p-toast>
<p-confirmDialog #cd id="cutomer-confrim-model" [style]="{ width: '30vw', top: '-190px' }" [baseZIndex]="10000">
    <ng-template pTemplate="footer">
        <button type="button" pButton class="cofirm-model-cancel-btn" label="No" (click)="cd.reject()"></button>
        <button type="button" pButton label="Yes" (click)="cd.accept()"></button>
    </ng-template>
</p-confirmDialog>
<p-sidebar id="vedicle-detail-penal" *ngIf="details" [(visible)]="main.bottomPanelActive" position="bottom"
    [baseZIndex]="10000">
    <!-- <p-tabView id="detail-tabbing"> -->
        
        <div class="action-row ">
            <!-- <div class="btn-right-box text-center pr-2">
                <h6 class="m-0">Battery Update</h6>
                <p-inputSwitch actionTitle="update_Battery" (onChange)="onBatteryUpdate($event,details.id)"
                    [(ngModel)]="details.update_Battery">
                </p-inputSwitch>
            </div>
            <div class="btn-right-box text-center pr-2">
                <h6 class="m-0">Update Parking Zone</h6>
                <p-inputSwitch actionTitle="update_Parking_Zone" (onChange)="onStatus($event,details.id)"
                    [(ngModel)]="details.update_Parking_Zone">
                </p-inputSwitch>
            </div> -->
            
            <div class="action-btn " style="margin-top: 30px;" (click)="main.onEditPanelButtonClick($event,details) ">
                <h6>Update</h6>
            </div>
            <!-- <div>
                <h6 class="m-0">In-Active / Active</h6>
                <p-inputSwitch actionTitle="active" [disabled]="!details.active" (onChange)="onChangeStatus($event,details.id)"
                    [(ngModel)]="details.active">
                </p-inputSwitch>
            </div> -->
            <!-- <div class="action-btn" (click)="deleteVehicle(details.id) ">
                <h6>Delete</h6>
            </div> -->
   
            <!-- <div class="action-btn" (click)="main.ChangeLocation(details)">
                <h6>Change Location</h6>
            </div> -->

         
       
        </div>


        <div class="head-row">
            <h6 class="panel-parent-heading">
                 <span>
                    Vehicle Details
                <!-- <img src="assets/layout/images/id.png" alt="" width="20">
                <span *ngIf="vehicleDetails !=null">
                    {{details.number}} has completed {{vehicleDetails.totalRides}} rides

                </span> -->
                </span> 
            </h6>
            <!-- <div class="btn-right-box">
                <a *ngIf="details.iot.imei != null" [routerLink]="['/iot/manage-iot-main']"
                    [queryParams]="{ customdata: details.iot.imei }" class="invoice-btn"><img class="mr-2"
                        src="assets/layout/images/iot-num.png" alt="" width="20" height="20"><span>
                            <h6>{{details.iot.imei }}</h6>
                    </span>
                </a>
                <div class="qr-main mt-2">
                    <p class="show-qr-img" (click)="previousWeekData()">Show Qr</p>
                    <div *ngIf = "isShow" class="qr-div">
                        <qr-code [value]=this.vehicleQR size="80"></qr-code>
                    </div>
                </div>
            </div> -->

            <div style="    display: flex;
            width: 100%;
            align-items: center;
            justify-content: end;
            padding-right: 20px;">
                
                <p-inputSwitch actionTitle="active" [disabled]="!details.active" (onChange)="onChangeStatus($event,details.id)"
                    [(ngModel)]="details.active">
                </p-inputSwitch>
                <h6 class="m-0" style="    color: white;
                padding-left: 10px;">In-Active / Active</h6>
            </div>
        </div>

        <!-- <p-tabPanel header="Vehicle info"> -->
            <div class="submenu-content settings">
                <div class="main-row">
                    
                    <div class="sales-settings card-main">
                        <h6><span>Vehicle Number </span> </h6>
                        <img src="assets/layout/images/company.png" alt="" width="40">
                        <h6> {{details.number}}</h6>
                    </div>
                    <div class="sales-settings card-main">
                        <h6><span>Serial No</span> </h6>
                        <img src="assets/layout/images/company.png" alt="" width="40">
                        <h6> {{details.serial_No}}</h6>
                    </div>
                    <div class="sales-settings card-main">
                        <h6><span>IMEI No</span> </h6>
                        <img src="assets/layout/images/company.png" alt="" width="40">
                        <h6> {{details?.iot?.imei}}</h6>
                    </div>
                    <div class="shipment-settings card-main">

                        <h6><span>Type</span> </h6>
                        <img src="assets/layout/images/type.png" alt="" width="40">
                        <h6> {{details.vehicleTypes.title}}</h6>
                    </div>
                    <div class="shipment-settings card-main">

                        <h6><span>Project Assigned</span> </h6>
                        <img src="assets/layout/images/type.png" alt="" width="40">
                        <h6> {{details?.project==null?'-':details?.project.title +" (" +details?.project.project_AutoId +")"}} </h6>
                    </div>

                    <div class="shipment-settings card-main">
                        <h6> <span>Status</span> </h6>
                        <img src="assets/layout/images/model.png" alt="" width="40">
                        <h6>
                            {{ details.active==1?'Active':'In-Active'}}
                        </h6>
                    </div>
                    <div class="shipment-settings card-main">
                        <h6> <span>Created at</span> </h6>
                        <img src="assets/layout/images/calender.png" alt="" width="40">
                        <h6>
                            {{ details.created_at | date:'MM-dd-yyyy'}}
                        </h6>
                    </div>

                    
                </div>
            </div>
        <!-- </p-tabPanel>
    </p-tabView> -->
</p-sidebar>


<p-dialog id="new-ride-model" class="Add-New-Form" header="Add Need Investigation Messages"
    [(visible)]="addNewMessageShow" [style]="{ width: '35vw' }" [baseZIndex]="10000">
    <form [formGroup]="saveStatusMessageForm" (ngSubmit)="onSubmitStatusMessagesForm()" class="add-vehicle-form"
        novalidate>
        <div class="form-row">
            <div class="col-md-12 col-md-4">
                <label>Messages</label>
                <div class="p-inputgroup">
                    <textarea type="text" id="txtmessages" name="messages" formControlName="messages" pInputText
                        placeholder="messages" rows="8" cols="50">
          </textarea>
                </div>
            </div>
        </div>
        <br>
        <div class="">
            <div class="col-md-12">
                <div class="button-footer text-right">
                    <button class="danger-btn mr-2 cancel-custom" (click)="addNewMessageShow = false" label="Cancel"
                        styleClass="ui-button-warning" pButton>
                    </button>


                    <button type="submit" class="p-button-text theme-btn" [disabled]="!saveStatusMessageForm.valid">
                        <span *ngIf="btnloading" class="spinner-border spinner-border-sm mr-1"></span>
                        Submit
                    </button>

                </div>
            </div>
        </div>
    </form>

</p-dialog>