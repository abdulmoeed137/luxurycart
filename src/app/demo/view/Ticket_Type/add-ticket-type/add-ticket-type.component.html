<p-toast></p-toast>
<div class="bread-container">
    <div class="left-box">
        <h4>
            <span>
                Manage Ticket Types
            </span>
        </h4>
    </div>
    <div class="right-box">
        <button pButton pRipple label="Add Ticket type" class="p-button-success mr-2 theme-btn" (click)="openNew()"></button>
    </div>
</div>



<form [formGroup]="ticketForm" (ngSubmit)="onSubmitForm()">
    <p-dialog id="new-user-model" [(visible)]="ticket_typeDialog" [style]="{width: '750px'}" header="Ticket Type Details" [modal]="true" class="p-fluid" [dismissableMask]="true">
        <ng-template pTemplate="content">
            <div class="formgrid grid">
                <div class="field col">
                    <label for="title">Title <span class="star-sign">*</span></label>
                    <input type="text" pInputText id="title" formControlName="title" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted}" />
                    <small class="ng-dirty ng-invalid" *ngIf="submitted">Title is required.</small>
                </div>
                <div class="field col">
                    <label for="project">Ticket Price (In SAR) <span class="star-sign">*</span></label>
                    <input type="number" pInputText id="ticket_Price" formControlName="ticket_Price" required autofocus [ngClass]="{'ng-invalid ng-dirty' : submitted}" />
                    
                    <small class="ng-dirty ng-invalid" *ngIf="submitted">Price is required.</small>
                </div>
            </div>

            <div class="formgrid grid">
                <div class="field col">
                    <label for="project">Project <span class="star-sign">*</span></label>
                    <p-dropdown id="project" filter="true" [options]="project" name="project" (onChange)="onProjectSelection($event)"
                            formControlName="project_Id" placeholder="Select Project">
                        </p-dropdown>
                    <small class="ng-dirty ng-invalid" *ngIf="submitted">Project is required.</small>
                </div>
                <div class="field col">
                    <label for="vehicle_type">Vehicle Group <span class="star-sign">*</span></label>
                    <p-dropdown id="vehicle_type" filter="true" [options]="vehicleType" name="vehicle_type"
                            formControlName="vehicle_Type_Id" placeholder="Select Vehicle Group">
                        </p-dropdown>
                    <small class="ng-dirty ng-invalid" *ngIf="submitted">Vehicle Group is required.</small>
                </div>

            </div>
        </ng-template>

        <ng-template pTemplate="footer">
            <button pButton pRipple label="Save" [disabled]="!ticketForm.valid" icon="pi pi-check" class="p-button-text theme-btn">
                <p-progressSpinner *ngIf="btnloading" [style]="{width: '25px', height: '25px'}" styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>
            </button>
        </ng-template>
    </p-dialog>
</form>